#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

npx --no-install lint-staged

if [ -f scripts/token-validate.js ]; then
  node scripts/token-validate.js || {
    echo "token-validate failed. Fix schema issues before committing."
    exit 1
  }
fi

if [ -f linting/token-lint-rules.js ]; then
  node linting/token-lint-rules.js --mode=local || {
    echo "token-lint (local) failed. Run 'node linting/token-lint-rules.js --mode=local' for details."
    exit 1
  }
fi
